---
import type {Training} from "../services/trainings_api";

interface Props {
    data: Training;
}

const months = [
    "Enero",
    "Febrero",
    "Marzo",
    "Abril",
    "Mayo",
    "Junio",
    "Julio",
    "Agosto",
    "Septiembre",
    "Octubre",
    "Noviembre",
    "Diciembre",
];

const { data } = Astro.props;

let monthName = "";
let day = undefined;

if(data.date) {
    const trainingDate = new Date(data.date);
    const monthNumber = trainingDate.getMonth();
    day = trainingDate.getDate();
    monthName = months[monthNumber].slice(0,3);
}


---

<div class="py-8 px-4 lg:w-1/3" id={`training_${data.id}`}>
    <div class="group h-full rounded-3xl border border-[#004171]/10 bg-white p-6 shadow-soft transition hover:-translate-y-1 hover:border-[#004171]/30">
        <div class="flex-grow pl-6">
            {
                data?.date ?
                    <span class="mb-3 inline-flex text-xs font-semibold uppercase tracking-[0.25em] text-[#004171]/70">
                        {day} {monthName}
                    </span>
                :
                    <span title="Pr칩ximamente..." class="mb-3 inline-flex text-xs font-semibold uppercase tracking-[0.25em] text-[#96AD2F]">
                        Pr칩ximamente
                    </span>
            }
            <h2
                    class="text-xs font-semibold uppercase tracking-[0.25em] text-[#96AD2F] mb-2"
            >
                {data.category_name}
            </h2>
            <h1 class="font-display text-xl font-semibold text-[#0B1B2B] mb-3">
                {data.title}
            </h1>
            <p class="leading-relaxed mb-6 text-base text-slate-700">
                {data?.summary}
            </p>
            <div class="flex items-center justify-between">
                <a class="text-[#004171] text-base font-semibold inline-flex items-center hover:text-[#004171]/80" href={data.link ?? '#'} target="_blank">M치s informaci칩n
                    <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14"></path>
                        <path d="M12 5l7 7-7 7"></path>
                    </svg>
                </a>
                <span class="hidden text-xs font-semibold uppercase tracking-[0.2em] text-[#004171]/50 group-hover:inline">Detalles</span>
            </div>
        </div>
    </div>
</div>
